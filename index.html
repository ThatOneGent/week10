<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Week 10 coding project">
    <meta name="author" content="Mark P.">
    <title>Week 10 Coding Assignment Home</title>
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="./index.css">
</head>

<body class="container">

    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
        <a class="navbar-brand" href="index.html">Week 10 Coding Assignment</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
            aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle Navigation">

            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav">
                <li class="nav-item active">
                    <a class="nav-link" href="index.html">Home</a>
                </li>


            </ul>

        </div>

    </nav>
    <div class="container">
        <div class="row">
            <div class="col-lg dullText">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse hendrerit felis tortor, nec commodo
                diam efficitur lacinia. Fusce lectus tellus, tincidunt in lectus eget, mollis gravida nunc. Vivamus orci
                metus, vestibulum ac leo vitae, molestie auctor massa. Sed eleifend et eros non dictum. Morbi accumsan
                commodo diam, quis commodo mi sagittis mattis. Etiam finibus laoreet nunc, et vehicula turpis. Phasellus
                eu magna tellus. In aliquet fermentum mi, suscipit efficitur libero consequat consequat. Vestibulum
                vulputate metus ut sodales mattis. Nam quis tellus non ipsum tincidunt hendrerit non sit amet magna.
                Proin felis leo, placerat sed finibus ut, condimentum quis orci.
                <hr class="border border-secondary border-3 opacity-75">
            </div>

            <div class="col-md boldText">
                Nulla vitae pulvinar odio, sed semper ante. Quisque tincidunt sapien felis, non egestas tellus mollis
                vitae. Phasellus convallis placerat justo in commodo. Nulla ultricies dui quis est tempus, id
                scelerisque nisl accumsan. Duis sed libero turpis. Mauris sed nibh id libero consequat efficitur a a
                ligula. Morbi volutpat eu turpis sit amet tempus. Nam quis neque id quam faucibus lobortis. Nullam
                mauris ligula, iaculis sit amet blandit in, elementum ut eros. Nullam sit amet ultricies lorem, non
                tincidunt metus. Fusce molestie tincidunt tempor. Integer pretium porta neque eget interdum. In et lorem
                purus. Vivamus eget nibh ut velit ultrices ullamcorper.
                <hr class="border border-secondary border-3 opacity-75">
            </div>
            <div class="col-md fancyText">
                Donec vel dui consequat, luctus lorem eu, ultricies lectus. Cras ac mauris ante. Pellentesque posuere
                luctus malesuada. Morbi consequat suscipit lacus. Vivamus iaculis lacinia arcu, vel fringilla dolor
                malesuada ac. Quisque tristique arcu elit, a commodo ipsum cursus ultricies. Etiam libero leo, molestie
                vel risus eu, placerat aliquam mauris.
                <hr class="border border-secondary border-3 opacity-75">
            </div>
        </div>

    </div>
    <br>

    <div id="root">
        <div id="tableDiv" class="table-responsive-sm">

            <table id="tableBody" class="table table-dark table-striped table-hover">

            </table>
        </div>
    </div>


    <form>
        <div class="form-group">
            <div class="row">
                <div class="col-md-4">
                    <input id="inputFName" class="form-control" type="text" name="fName" placeholder="First Name...">
                </div>
                <div class="col-md-4">
                    <input id="inputLName" class="form-control" type="text" name="lName" placeholder="Last Name...">
                </div>


            </div><br>
            <div class="row">
                <div class="col-md-4">
                    <input id="inputEmail" class="form-control" type="text" name="email" placeholder="E-mail...">
                </div>

                <div class="col-md-4">
                    <input id="inputCity" class="form-control" type="text" name="city" placeholder="City...">
                </div>
                <div class="col-md-4">
                    <input id="inputState" class="form-control" minlength="2" maxlength="2" type="text" name="State"
                        placeholder="State (Two Letter Limit)...">
                </div>
            </div>
        </div>
        <br>
        <button onclick="addMember()" type="button" class="btn btn-secondary">Add Member</button>
    </form>

    <script src="table.js"></script> 


    <script>

        // adding a member to the table
        function addMember() {
            console.log("addmember hit")
            const firstName = document.getElementById("inputFName").value;
            const lastName = document.getElementById("inputLName").value;
            const email = document.getElementById("inputEmail").value;
            const city = document.getElementById("inputCity").value;
            const state = document.getElementById("inputState").value.toUpperCase();
            const pin = Math.floor(1000 + Math.random() * 9000);  // generate a random pin for employee


            const newMember = {
                firstName,
                lastName,
                email,
                city,
                state,
                pin,
            };

            console.log(newMember);  // data check to console

            tableInfo.push(newMember);

            console.log("calling populatetable in addmember");
            populateTable();
        }
        

        //clearing the table to repopulate
        function clearTable() {
            while (tableBody.firstChild) {
                tableBody.removeChild(tableBody.firstChild);
            }
        }

        // main populate table function
        function populateTable() {
            clearTable(); //clear to prevent duplicate table generation.

            console.log("Inner populate table function hit")

            //Create headerpart of tables
            const headerRow = document.createElement("tr");
            for (const header of tableHeaders) {
                const hCell = document.createElement("th");
                const text = document.createTextNode(header);
                cell.appendChild(text);
                headerRow.appendChild(hCell);
            }
            tableBody.appendChild(headerRow);

            // create body section of table
            for (const member of tableInfo) {
                const tabRow = document.createElement("tr");
                const values = Object.values(member);
                for (const value of values) {
                    const cell = document.createElement("td");
                    const text = document.createTextNode(value);
                    cell.appendChild(text);
                    row.appendChild(cell);
                }
                tableBody.appendChild(tabRow);
            }
        }



        // grab elements that already exists with bootstrap classes
            const table = document.getElementById("tableDiv");
            const tableBody = document.getElementById("tableBody");

            //console for initial populate on page load
            console.log("initial populate table called");
            populateTable(tableBody);

            table.appendChild(tableBody); // append table it self to table div containing bootstrap class
            const root = document.getElementById("root");

            root.appendChild(table); //append generated table to the main div
    </script>

</body>

</html>